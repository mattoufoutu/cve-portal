///////////////////////////////////////////////////////////////////////////////
/////////////////////// ADMIN USER MANAGEMENT PART ////////////////////////////
///////////////////////////////////////////////////////////////////////////////

$usertable = $('#usertable').bootstrapTable({});

//flush the form add-user for new insertions//
$('#add-user').on("click", function () {
  $('.form-control').val('');
});

//action icons (update/delete) user//
function operateFormatter(value, row, index) {
  return [
    '<a class="updateuser" href="#" title="Update user">',
    '<i class="glyphicon glyphicon-pencil"></i>',
    '</a>',
    '<a class="deleteuser" href="#" title="Delete user">',
    '<i class="glyphicon glyphicon-trash"></i>',
    '</a>'
  ].join('  ');
}

//action events (update/delete) user//
window.operateEvents = {
  'click .deleteuser': function (e, value, row, index) {
    $('#DeleteUserModal').modal('show');
    $('input#id').val(row['id']);
    $('input#deltrigger').val(true);
    $('input#name.form-control').val(row['name']);
    $('input#email.form-control').val(row['email']);
    $('input#affiliation.form-control').val(row['affiliation']);
  },
  'click .updateuser': function (e, value, row, index) {
    $('#UpdateUserModal').modal('show');
    $('input#id').val(row['id']);
    $('input#confirmed').prop('checked', row['confirmed']);
    $('select#role.form-control').val(row['role_id2']);
    $('input#name.form-control').val(row['name']);
    $('input#email.form-control').val(row['email']);
    $('input#affiliation.form-control').val(row['affiliation']);
    $('textarea#pgp.form-control').val(row['pgp']);
  }
};
